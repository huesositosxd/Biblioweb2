{% extends 'principal.html' %}
{% block title %}Modificar Acceso{% endblock %}
{% block content %}
<div class="container" style="margin-top:6rem; margin-left:-0.2rem;">
    
  <form id="form" method="POST" action="{% url 'modificar_acceso' %}">
    {% csrf_token %}
    <h2>Modificar contraseña</h2>

    <div class="input-grub">
      <label for="correo">Correo:</label>
      <input class="datos_c" 
             type="email" 
             name="correo" 
             value="{{ correo }}" 
             readonly>

      <label for="password">Nueva contraseña:</label>
      <input id="password" class="datos_c" 
             type="password" 
             name="password" 
             placeholder="Mínimo 6 caracteres" 
             required>

      <label for="password2">Repite la contraseña:</label>
      <input id="password2" class="datos_c" 
             type="password" 
             name="confirm_password" 
             placeholder="Repite la contraseña" 
             required>

      <div class="submit" style="margin-top:1rem;">
        <input class="btn" type="submit" value="Guardar">
      </div>
    </div>
  </form>
</div>

<style>
  p { margin: 20px 0; }
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form  = document.getElementById('form');
  const pass1 = document.getElementById('password');
  const pass2 = document.getElementById('password2');

  form.addEventListener('submit', function (e) {
    const p1 = pass1.value.trim();
    const p2 = pass2.value.trim();

    if (p1.length < 6) {
      e.preventDefault();
      return alert("La contraseña debe tener al menos 6 caracteres.");
    }
    if (p1 !== p2) {
      e.preventDefault();
      return alert("Las contraseñas no coinciden.");
    }
    // si pasa, el formulario se envía normalmente
  });
});
</script>
{% endblock %}